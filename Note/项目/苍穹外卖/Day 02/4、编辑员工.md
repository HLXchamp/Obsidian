### 需求分析与设计

![[Pasted image 20240515112317.png|550]]

![[Pasted image 20240515112352.png]]

![[Pasted image 20240515112410.png|625]]

### 代码开发

#### 根据ID查询员工

controller：

```java
@GetMapping("/{id}")  
@ApiOperation("根据ID查询员工")  
public Result<Employee> getById(@PathVariable Long id) {  
    Employee employee = employeeService.getById(id);  
    return Result.success(employee);  
}
```

service：

```Java
Employee getById(Long id);

@Override  
public Employee getById(Long id) {  
    Employee employee = employeeMapper.getById(id);  
    //加强安全性，不传密码  
    employee.setPassword("*****");  
    return employee;  
}
```

mapper：

```java
/**  
 * 根据ID查询员工  
 * @param id  
 * @return  
 */  
@Select("select * from employee where id = #{id}")  
Employee getById(Long id);
```

#### 编辑员工信息

controller：

```java
@PutMapping  
@ApiOperation("编辑员工信息")  
public Result update(@RequestBody EmployeeDTO employeeDTO) {  
    log.info("编辑员工信息:{}", employeeDTO);  
    employeeService.update(employeeDTO);  
    return Result.success();  
}
```

service：

```java
void update(EmployeeDTO employeeDTO);
```

```java
@Override  
public void update(EmployeeDTO employeeDTO) {  
    //update方法需要的是employee对象  
    Employee employee = new Employee();  
    BeanUtils.copyProperties(employeeDTO, employee);  
    employee.setUpdateTime(LocalDateTime.now());  
    employee.setUpdateUser(BaseContext.getCurrentId());  
    employeeMapper.update(employee);  
}
```

mapper：

复用之前的update方法！

### 测试

![[Pasted image 20240515155223.png|525]]

![[Pasted image 20240515155244.png|625]]

