### 需求分析与设计

![[Pasted image 20240515103710.png]]

![[Pasted image 20240515103727.png|425]]

![[Pasted image 20240515103800.png]]

### 代码开发

controller：

```java
@PostMapping("/status/{status}")  
@ApiOperation("启用禁用员工账号")  
public Result startOrStop(@PathVariable Integer status, Long id) { //@PathVariable处理路径参数  
    log.info("启用禁用员工账号:{},{}", status, id);  
    employeeService.startOrStop(status, id);  
    return Result.success();  
}

```

service：

```java
void startOrStop(Integer status, Long id);
```

```java
@Override  
    public void startOrStop(Integer status, Long id) {  
//        Employee employee = new Employee();  
//        employee.setStatus(status);  
//        employee.setUpdateTime(LocalDateTime.now());  
        Employee employee = Employee.builder() //使用bulid方法  
                .status(status)  
                .id(id)  
                .updateTime(LocalDateTime.now())  
                .build();  
        employeeMapper.update(employee);  
    }
```

mapper：

```java
/**  
 * 根据主键动态修改属性  
 * @param employee  
 * @return  
 */  
void update(Employee employee);
```

update的动态SQL可以复用：

```xml
<update id="update" parameterType="Employee">  
    update employee  
    <set>  
        <if test="name != null and name != ''">  
            name = #{name},  
        </if>  
        <if test="username != null">username = #{username},</if>  
        <if test="password != null">password = #{password},</if>  
        <if test="phone != null">phone = #{phone},</if>  
        <if test="sex != null">sex = #{sex},</if>  
        <if test="idNumber != null">id_Number = #{idNumber},</if>  
        <if test="updateTime != null">update_Time = #{updateTime},</if>  
        <if test="updateUser != null">update_User = #{updateUser},</if>  
        <if test="status != null">status = #{status},</if>  
  
    </set>  
    where id = #{id}  
</update>
```

### 测试

调整状态成功：

![[Pasted image 20240515110424.png]]